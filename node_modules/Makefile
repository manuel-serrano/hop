#*=====================================================================*/
#*    serrano/prgm/project/hop/hop/node_modules/Makefile               */
#*    -------------------------------------------------------------    */
#*    Author      :  Manuel Serrano                                    */
#*    Creation    :  Fri Jan 20 13:46:40 2006                          */
#*    Last change :  Tue Jul 23 18:57:38 2024 (serrano)                */
#*    Copyright   :  2006-24 Manuel Serrano                            */
#*    -------------------------------------------------------------    */
#*    node_modules Makefile                                            */
#*=====================================================================*/
do: build

#*---------------------------------------------------------------------*/
#*    Configuration                                                    */
#*---------------------------------------------------------------------*/
-include ../etc/Makefile.hopconfig
-include ../etc/Makefile.version

#*---------------------------------------------------------------------*/
#*    The entries                                                      */
#*---------------------------------------------------------------------*/
.PHONY: build clean install uninstall

build:
	$(MAKE) -C exif/hop build
	$(MAKE) -C fontifier/hop build
	$(MAKE) -C hop/hop build
	$(MAKE) -C hopc/hop build
	$(MAKE) -C markdown/hop build
	$(MAKE) -C readlines/hop build
	$(MAKE) -C syslog/hop build
	$(MAKE) -C texinfo/lib build
	$(MAKE) -C config/hop build
	$(MAKE) -C hopscript/lib build
	$(MAKE) -C openpgp/lib build
	$(MAKE) -C systime/lib build
	$(MAKE) -C sqlite/lib build build-node
	$(MAKE) -C system/lib build
	$(MAKE) -C cpp/lib build
	$(MAKE) -C feed/lib build
	$(MAKE) -C tree/lib build
	$(MAKE) -C xml/lib build
	$(MAKE) -C csv/lib build
	$(MAKE) -C text/lib build
	$(MAKE) -C hz/lib build
	$(MAKE) -C ts/lib build
	$(MAKE) -C utils/lib build
	$(MAKE) -C vcf/lib build
	$(MAKE) -C hopdroid/lib build
	$(MAKE) -C zeroconf/lib build
	$(MAKE) -C user/hop build

#*---------------------------------------------------------------------*/
#*    install                                                          */
#*---------------------------------------------------------------------*/
install:
	$(MAKE) mkdir DIR=$(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules
	$(MAKE) mkdir DIR=$(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules/@hop
	$(MAKE) -C exif/hop install
	$(MAKE) -C fontifier/hop install
	$(MAKE) -C hop/hop install
	$(MAKE) -C hopc/hop install
	$(MAKE) -C markdown/hop install
	$(MAKE) -C readlines/hop install
	$(MAKE) -C syslog/hop install
	$(MAKE) installmodule MOD=notepad
	$(MAKE) installmodule MOD=spage
	$(MAKE) installmodule MOD=wiki
	$(MAKE) installmodule MOD=security
	$(MAKE) installmodule MOD=config
	$(MAKE) installmodule MOD=hopdoc
	$(MAKE) installmodule MOD=hss
	$(MAKE) installmodule MOD=@types
	$(MAKE) -C texinfo/lib install
	$(MAKE) -C config/hop install
	$(MAKE) -C user/hop install
	$(MAKE) -C hopscript/lib install
	$(MAKE) -C openpgp/lib install
	$(MAKE) -C systime/lib install
	$(MAKE) -C sqlite/lib install
	$(MAKE) -C system/lib install
	$(MAKE) -C cpp/lib install
	$(MAKE) -C feed/lib install
	$(MAKE) -C tree/lib install
	$(MAKE) -C xml/lib install
	$(MAKE) -C csv/lib install
	$(MAKE) -C text/lib install
	$(MAKE) -C hz/lib install
	$(MAKE) -C ts/lib install
	$(MAKE) -C utils/lib install
	$(MAKE) -C vcf/lib install
	$(MAKE) -C hopdroid/lib install
	$(MAKE) -C zeroconf/lib install
	chmod $(MODDIR) $(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules

installmodule:
	cp -r $(MOD) $(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules
	chmod -R $(MODDIR) $(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules/$(MOD)


uninstall:
	-$(RM) -rf $(DESTDIR)$(HOPLIBDIR)/$(HOPFILDIR)/node_modules

#*---------------------------------------------------------------------*/
#*    clean                                                            */
#*---------------------------------------------------------------------*/
clean:
	$(MAKE) -C exif/hop clean
	$(MAKE) -C fontifier/hop clean
	$(MAKE) -C hop/hop clean
	$(MAKE) -C hopc/hop clean
	$(MAKE) -C hopc/node clean
	$(MAKE) -C markdown/hop clean
	$(MAKE) -C readlines/hop clean
	$(MAKE) -C syslog/hop clean
	$(MAKE) -C texinfo/lib clean
	$(MAKE) -C config/hop clean
	$(MAKE) -C user/hop clean
	$(MAKE) -C hopscript/lib clean
	$(MAKE) -C openpgp/lib clean
	$(MAKE) -C systime/lib clean
	$(MAKE) -C sqlite/lib clean
	$(MAKE) -C system/lib clean
	$(MAKE) -C cpp/lib clean
	$(MAKE) -C feed/lib clean
	$(MAKE) -C tree/lib clean
	$(MAKE) -C xml/lib clean
	$(MAKE) -C csv/lib clean
	$(MAKE) -C text/lib clean
	$(MAKE) -C hz/lib clean
	$(MAKE) -C ts/lib clean
	$(MAKE) -C utils/lib clean
	$(MAKE) -C vcf/lib clean
	$(MAKE) -C hopdroid/lib clean
	$(MAKE) -C zeroconf/lib clean

devclean: clean

distclean: clean

