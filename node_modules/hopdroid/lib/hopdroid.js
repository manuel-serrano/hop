/*=====================================================================*/
/*    .../project/hop/hop/node_modules/hopdroid/lib/hopdroid.js        */
/*    -------------------------------------------------------------    */
/*    Author      :  Manuel Serrano                                    */
/*    Creation    :  Sun Jul  6 06:11:11 2014                          */
/*    Last change :  Thu Jan 30 10:52:20 2025 (serrano)                */
/*    Copyright   :  2014-25 Manuel Serrano                            */
/*    -------------------------------------------------------------    */
/*    HOP hopdroid                                                     */
/*=====================================================================*/
"use hopscript"

/*---------------------------------------------------------------------*/
/*    import ...                                                       */
/*---------------------------------------------------------------------*/
import { vCard } from "@hop/vcf";
export { hopdroid, Wifi, Phone };

/*---------------------------------------------------------------------*/
/*    Bigloo module clause to spawn hopjs HOPDROID initialization      */
/*---------------------------------------------------------------------*/
const hopdroid = require("./_hopdroid.hop");
const Wifi = hopdroid.wifi;
const phone = hopdroid.phone;

/*---------------------------------------------------------------------*/
/*    Phone ...                                                        */
/*---------------------------------------------------------------------*/
function Phone(opts) {
   const p = new phone(opts);
   
   if (p.arch === "emulator") {
      console.log(require.resolve("./_simulator.hop"));
      require("./_simulator.hop").setEmulatedPhone(p);
   }
   
   return p;
}
		
/*---------------------------------------------------------------------*/
/*    contacts ...                                                     */
/*---------------------------------------------------------------------*/
hopdroid.phone.prototype.contacts = function(projection, selection) {
   return hopdroid.contacts.call(this, projection, selection)
      .map( vc => new vCard(vc));
}

/*---------------------------------------------------------------------*/
/*    exports                                                          */
/*---------------------------------------------------------------------*/
module.exports = hopdroid;

/* hopdroid.bindHopActivity( { action: "ACTION_CALL",                  */
/* 			    logo: undefined,                           */
/* 			    uri: call.action } );                      */

